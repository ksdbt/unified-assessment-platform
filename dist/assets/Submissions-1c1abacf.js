import{R as te,f as c,a3 as U,J as ne,k as O,g as se,m as le,r as ie,a4 as ae,e as y,z as oe,a5 as re,a6 as ce,u as de,a as h,j as o,C as P,s as V,a7 as me,a8 as ue,a9 as be}from"./index-7e43eeaa.js";import{g as ge}from"./submissions-daaf532e.js";import{b as B}from"./assessments-75df469f.js";import{T as pe}from"./Table-8d2bfa3e.js";import{M as he}from"./index-3d906005.js";import{T as H}from"./index-cdc86ff5.js";import{L as W}from"./index-6800dda7.js";import{C as G}from"./ClockCircleOutlined-2802ea38.js";import{C as fe}from"./CheckCircleOutlined-8efca08c.js";import"./index-6887f962.js";import"./useForm-872d7ca5.js";import"./index-b2b0373a.js";import"./extendsObject-bdadc4da.js";import"./index-d2f8d546.js";import"./fade-e1fcf046.js";import"./useClosable-f6b9b093.js";import"./row-43cc7f0c.js";const ve={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},xe=ve,ye=te.createContext({}),D=ye;var $e=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};const Oe=e=>ne(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function je(e,t,a){const n=c.useMemo(()=>t||Oe(a),[t,a]);return c.useMemo(()=>n.map(m=>{var{span:d}=m,p=$e(m,["span"]);return d==="filled"?Object.assign(Object.assign({},p),{filled:!0}):Object.assign(Object.assign({},p),{span:typeof d=="number"?d:U(e,d)})}),[n,e])}var Se=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};function Ce(e,t){let a=[],n=[],s=!1,m=0;return e.filter(d=>d).forEach(d=>{const{filled:p}=d,g=Se(d,["filled"]);if(p){n.push(g),a.push(n),n=[],m=0;return}const v=t-m;m+=d.span||1,m>=t?(m>t?(s=!0,n.push(Object.assign(Object.assign({},g),{span:v}))):n.push(g),a.push(n),n=[],m=0):n.push(g)}),n.length>0&&a.push(n),a=a.map(d=>{const p=d.reduce((g,v)=>g+(v.span||1),0);if(p<t){const g=d[d.length-1];return g.span=t-(p-(g.span||1)),d}return d}),[a,s]}const Ne=(e,t)=>{const[a,n]=c.useMemo(()=>Ce(t,e),[t,e]);return a},we=Ne,Ie=({children:e})=>e,Ee=Ie,L=e=>e!=null,Te=e=>{const{itemPrefixCls:t,component:a,span:n,className:s,style:m,labelStyle:d,contentStyle:p,bordered:g,label:v,content:b,colon:j,type:l,styles:r}=e,f=a,{classNames:i}=c.useContext(D),S=Object.assign(Object.assign({},d),r==null?void 0:r.label),u=Object.assign(Object.assign({},p),r==null?void 0:r.content);return g?c.createElement(f,{colSpan:n,style:m,className:O(s,{[`${t}-item-${l}`]:l==="label"||l==="content",[i==null?void 0:i.label]:(i==null?void 0:i.label)&&l==="label",[i==null?void 0:i.content]:(i==null?void 0:i.content)&&l==="content"})},L(v)&&c.createElement("span",{style:S},v),L(b)&&c.createElement("span",{style:u},b)):c.createElement(f,{colSpan:n,style:m,className:O(`${t}-item`,s)},c.createElement("div",{className:`${t}-item-container`},L(v)&&c.createElement("span",{style:S,className:O(`${t}-item-label`,i==null?void 0:i.label,{[`${t}-item-no-colon`]:!j})},v),L(b)&&c.createElement("span",{style:u,className:O(`${t}-item-content`,i==null?void 0:i.content)},b)))},R=Te;function _(e,{colon:t,prefixCls:a,bordered:n},{component:s,type:m,showLabel:d,showContent:p,labelStyle:g,contentStyle:v,styles:b}){return e.map(({label:j,children:l,prefixCls:r=a,className:f,style:i,labelStyle:S,contentStyle:u,span:M=1,key:I,styles:x},E)=>typeof s=="string"?c.createElement(R,{key:`${m}-${I||E}`,className:f,style:i,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},g),b==null?void 0:b.label),S),x==null?void 0:x.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},v),b==null?void 0:b.content),u),x==null?void 0:x.content)},span:M,colon:t,component:s,itemPrefixCls:r,bordered:n,label:d?j:null,content:p?l:null,type:m}):[c.createElement(R,{key:`label-${I||E}`,className:f,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),b==null?void 0:b.label),i),S),x==null?void 0:x.label),span:1,colon:t,component:s[0],itemPrefixCls:r,bordered:n,label:j,type:"label"}),c.createElement(R,{key:`content-${I||E}`,className:f,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),b==null?void 0:b.content),i),u),x==null?void 0:x.content),span:M*2-1,component:s[1],itemPrefixCls:r,bordered:n,content:l,type:"content"})])}const Me=e=>{const t=c.useContext(D),{prefixCls:a,vertical:n,row:s,index:m,bordered:d}=e;return n?c.createElement(c.Fragment,null,c.createElement("tr",{key:`label-${m}`,className:`${a}-row`},_(s,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),c.createElement("tr",{key:`content-${m}`,className:`${a}-row`},_(s,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):c.createElement("tr",{key:m,className:`${a}-row`},_(s,e,Object.assign({component:d?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},Pe=Me,Be=e=>{const{componentCls:t,labelBg:a}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.padding)} ${y(e.paddingLG)}`,borderInlineEnd:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:a,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.paddingSM)} ${y(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${y(e.paddingXS)} ${y(e.padding)}`}}}}}},Le=e=>{const{componentCls:t,extraColor:a,itemPaddingBottom:n,itemPaddingEnd:s,colonMarginRight:m,colonMarginLeft:d,titleMarginBottom:p}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ie(e)),Be(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:p},[`${t}-title`]:Object.assign(Object.assign({},ae),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:s},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${y(d)} ${y(m)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},ze=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),Ae=se("Descriptions",e=>{const t=le(e,{});return Le(t)},ze);var Re=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};const X=e=>{const{prefixCls:t,title:a,extra:n,column:s,colon:m=!0,bordered:d,layout:p,children:g,className:v,rootClassName:b,style:j,size:l,labelStyle:r,contentStyle:f,styles:i,items:S,classNames:u}=e,M=Re(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:I,direction:x,className:E,style:Q,classNames:N,styles:w}=oe("descriptions"),$=I("descriptions",t),z=re(),q=c.useMemo(()=>{var T;return typeof s=="number"?s:(T=U(z,Object.assign(Object.assign({},xe),s)))!==null&&T!==void 0?T:3},[z,s]),J=je(z,S,g),A=ce(l),K=we(q,J),[Y,Z,k]=Ae($),ee=c.useMemo(()=>({labelStyle:r,contentStyle:f,styles:{content:Object.assign(Object.assign({},w.content),i==null?void 0:i.content),label:Object.assign(Object.assign({},w.label),i==null?void 0:i.label)},classNames:{label:O(N.label,u==null?void 0:u.label),content:O(N.content,u==null?void 0:u.content)}}),[r,f,i,u,N,w]);return Y(c.createElement(D.Provider,{value:ee},c.createElement("div",Object.assign({className:O($,E,N.root,u==null?void 0:u.root,{[`${$}-${A}`]:A&&A!=="default",[`${$}-bordered`]:!!d,[`${$}-rtl`]:x==="rtl"},v,b,Z,k),style:Object.assign(Object.assign(Object.assign(Object.assign({},Q),w.root),i==null?void 0:i.root),j)},M),(a||n)&&c.createElement("div",{className:O(`${$}-header`,N.header,u==null?void 0:u.header),style:Object.assign(Object.assign({},w.header),i==null?void 0:i.header)},a&&c.createElement("div",{className:O(`${$}-title`,N.title,u==null?void 0:u.title),style:Object.assign(Object.assign({},w.title),i==null?void 0:i.title)},a),n&&c.createElement("div",{className:O(`${$}-extra`,N.extra,u==null?void 0:u.extra),style:Object.assign(Object.assign({},w.extra),i==null?void 0:i.extra)},n)),c.createElement("div",{className:`${$}-view`},c.createElement("table",null,c.createElement("tbody",null,K.map((T,F)=>c.createElement(Pe,{key:F,index:F,colon:m,prefixCls:$,vertical:p==="vertical",bordered:d,row:T}))))))))};X.Item=Ee;const C=X,tt=()=>{var b,j;const{user:e}=de(),[t,a]=c.useState(null),[n,s]=c.useState(!1),m=ge(e.id),d=l=>{switch(l){case"evaluated":return"green";case"pending":return"orange";default:return"default"}},p=l=>{switch(l){case"evaluated":return o(fe,{});case"pending":return o(G,{});default:return o(be,{})}},g=l=>{a(l),s(!0)};return h("div",{className:"p-6",children:[h("div",{className:"mb-6",children:[o("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"My Submissions"}),o("p",{className:"text-gray-600 dark:text-gray-400",children:"View your assessment submissions and results"})]}),o(P,{children:o(pe,{columns:[{title:"Assessment",dataIndex:"assessmentId",key:"assessment",render:l=>{const r=B(l);return h("div",{children:[o("div",{className:"font-medium",children:r==null?void 0:r.title}),o("div",{className:"text-sm text-gray-600",children:r==null?void 0:r.subject})]})}},{title:"Submitted",dataIndex:"submittedAt",key:"submittedAt",render:l=>new Date(l).toLocaleDateString()},{title:"Status",dataIndex:"status",key:"status",render:l=>o(H,{color:d(l),icon:p(l),children:l.charAt(0).toUpperCase()+l.slice(1)})},{title:"Score",dataIndex:"percentage",key:"score",render:(l,r)=>r.status==="evaluated"?h("div",{className:"text-center",children:[h("div",{className:`font-bold ${l>=70?"text-green-600":l>=50?"text-orange-600":"text-red-600"}`,children:[l,"%"]}),h("div",{className:"text-sm text-gray-600",children:[r.totalScore,"/",r.maxScore]})]}):o("span",{className:"text-gray-500",children:"Pending"})},{title:"Time Taken",dataIndex:"timeTaken",key:"timeTaken",render:l=>{if(!l)return"-";const r=Math.floor(l/60),f=l%60;return r>0?`${r}h ${f}m`:`${f}m`}},{title:"Actions",key:"actions",render:(l,r)=>o(V,{type:"primary",icon:o(ue,{}),size:"small",onClick:()=>g(r),children:"View"})}],dataSource:m,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(l,r)=>`${r[0]}-${r[1]} of ${l} submissions`},locale:{emptyText:"No submissions yet"}})}),o(he,{title:"Submission Details",open:n,onCancel:()=>s(!1),width:800,footer:[o(V,{onClick:()=>s(!1),children:"Close"},"close")],children:t&&h("div",{className:"space-y-6",children:[h(C,{title:"Assessment Information",bordered:!0,column:2,children:[o(C.Item,{label:"Assessment",children:(b=B(t.assessmentId))==null?void 0:b.title}),o(C.Item,{label:"Subject",children:(j=B(t.assessmentId))==null?void 0:j.subject}),o(C.Item,{label:"Submitted",children:new Date(t.submittedAt).toLocaleString()}),o(C.Item,{label:"Status",children:o(H,{color:d(t.status),children:t.status})}),t.status==="evaluated"&&h(me,{children:[o(C.Item,{label:"Score",children:h("span",{className:`font-bold ${t.percentage>=70?"text-green-600":t.percentage>=50?"text-orange-600":"text-red-600"}`,children:[t.percentage,"%"]})}),h(C.Item,{label:"Points",children:[t.totalScore,"/",t.maxScore]})]}),o(C.Item,{label:"Time Taken",children:t.timeTaken?`${Math.floor(t.timeTaken/60)}h ${t.timeTaken%60}m`:"-"})]}),t.instructorFeedback&&o(P,{title:"Instructor Feedback",children:o("p",{children:t.instructorFeedback})}),t.status==="evaluated"&&o(P,{title:"Question Breakdown",children:o(W,{dataSource:t.answers,renderItem:(l,r)=>o(W.Item,{children:h("div",{className:"flex justify-between items-start w-full",children:[h("div",{className:"flex-1",children:[h("div",{className:"font-medium mb-2",children:["Question ",r+1]}),o("div",{className:"text-sm text-gray-600 mb-2",children:(()=>{const f=B(t.assessmentId),i=f==null?void 0:f.questions.find(S=>S.id===l.questionId);return(i==null?void 0:i.question)||"Question not found"})()}),h("div",{className:"text-sm",children:[o("strong",{children:"Your Answer:"})," ",typeof l.answer=="string"?l.answer:l.answer.join(", ")]}),l.feedback&&o("div",{className:`text-sm mt-1 ${l.isCorrect?"text-green-600":"text-red-600"}`,children:l.feedback})]}),o("div",{className:"text-right ml-4",children:h("div",{className:`font-bold ${l.points>0?"text-green-600":"text-red-600"}`,children:[l.points," points"]})})]})})})}),t.status==="pending"&&o(P,{children:h("div",{className:"text-center text-orange-600",children:[o(G,{className:"text-2xl mb-2"}),o("p",{children:"This submission is being evaluated by your instructor."}),o("p",{className:"text-sm",children:"Results will be available soon."})]})})]})})]})};export{tt as default};
