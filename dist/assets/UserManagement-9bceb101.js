import{aa as j,ab as g,f as h,aZ as L,a as s,j as e,s as d,ak as P,C as S,af as N,I as m,q as b,a0 as A,b1 as B,$ as c,b2 as k,A as J,U as Q,X as K,b3 as X}from"./index-7e43eeaa.js";import{T as Z}from"./Table-8d2bfa3e.js";import{M as w}from"./index-3d906005.js";import{F as n}from"./index-8494a245.js";import{T as E}from"./index-cdc86ff5.js";import{S as _}from"./StopOutlined-d39fdb82.js";import{P as G}from"./index-292e3508.js";import{C as H}from"./CheckCircleOutlined-8efca08c.js";import{D as W}from"./DeleteOutlined-133431b9.js";import"./index-6887f962.js";import"./useForm-872d7ca5.js";import"./index-b2b0373a.js";import"./extendsObject-bdadc4da.js";import"./index-d2f8d546.js";import"./fade-e1fcf046.js";import"./useClosable-f6b9b093.js";import"./row-43cc7f0c.js";const{Option:o}=b,T=j().shape({name:g().required("Name is required"),email:g().email("Invalid email").required("Email is required"),role:g().required("Role is required"),instituteCode:g().required("Institute code is required")}),fe=()=>{const[p,v]=h.useState(L),[F,f]=h.useState(!1),[q,C]=h.useState(!1),[r,x]=h.useState(null),[I,y]=h.useState(!1),M=a=>{switch(a){case"admin":return"red";case"instructor":return"purple";case"student":return"blue";default:return"default"}},D=a=>a?"green":"red",O=async a=>{y(!0);try{const t=B({...a,password:"password123",avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.name.replace(" ","")}`,profile:{}});v(i=>[...i,t]),f(!1),c.success("User created successfully!")}catch{c.error("Failed to create user")}finally{y(!1)}},$=async a=>{y(!0);try{const t=k(r.id,a);t&&(v(i=>i.map(l=>l.id===r.id?t:l)),C(!1),x(null),c.success("User updated successfully!"))}catch{c.error("Failed to update user")}finally{y(!1)}},R=async a=>{try{X(a)&&(v(i=>i.filter(l=>l.id!==a)),c.success("User deleted successfully!"))}catch{c.error("Failed to delete user")}},V=async a=>{try{const t=k(a.id,{isActive:!a.isActive});t&&(v(i=>i.map(l=>l.id===a.id?t:l)),c.success(`User ${t.isActive?"activated":"suspended"} successfully!`))}catch{c.error("Failed to update user status")}},z=[{title:"User",dataIndex:"name",key:"user",render:(a,t)=>s("div",{className:"flex items-center space-x-3",children:[e(J,{src:t.avatar,icon:e(Q,{})}),s("div",{children:[e("div",{className:"font-medium",children:a}),e("div",{className:"text-sm text-gray-600",children:t.email})]})]})},{title:"Role",dataIndex:"role",key:"role",render:a=>e(E,{color:M(a),children:a.charAt(0).toUpperCase()+a.slice(1)})},{title:"Institute",dataIndex:"instituteCode",key:"instituteCode",render:a=>e("span",{className:"font-mono text-sm",children:a})},{title:"Status",dataIndex:"isActive",key:"status",render:a=>e(E,{color:D(a),children:a?"Active":"Suspended"})},{title:"Joined",dataIndex:"createdAt",key:"createdAt",render:a=>new Date(a).toLocaleDateString()},{title:"Actions",key:"actions",render:(a,t)=>s(A,{children:[e(d,{type:"link",icon:e(K,{}),size:"small",onClick:()=>{x(t),C(!0)},children:"Edit"}),e(d,{type:(t.isActive,"link"),danger:t.isActive,icon:t.isActive?e(_,{}):e(H,{}),size:"small",onClick:()=>V(t),children:t.isActive?"Suspend":"Activate"}),e(G,{title:"Delete User",description:"Are you sure you want to delete this user? This action cannot be undone.",onConfirm:()=>R(t.id),okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e(d,{type:"link",danger:!0,icon:e(W,{}),size:"small",children:"Delete"})})]})}];return s("div",{className:"p-6",children:[s("div",{className:"flex justify-between items-center mb-6",children:[s("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"User Management"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage users, roles, and permissions"})]}),e(d,{type:"primary",icon:e(P,{}),onClick:()=>f(!0),children:"Add User"})]}),s(Row,{gutter:[16,16],className:"mb-6",children:[e(Col,{xs:24,sm:8,children:s(S,{className:"text-center",children:[e("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e("div",{className:"text-sm text-gray-600",children:"Total Users"})]})}),e(Col,{xs:24,sm:8,children:s(S,{className:"text-center",children:[e("div",{className:"text-2xl font-bold text-green-600",children:p.filter(a=>a.isActive).length}),e("div",{className:"text-sm text-gray-600",children:"Active Users"})]})}),e(Col,{xs:24,sm:8,children:s(S,{className:"text-center",children:[e("div",{className:"text-2xl font-bold text-red-600",children:p.filter(a=>!a.isActive).length}),e("div",{className:"text-sm text-gray-600",children:"Suspended Users"})]})})]}),e(S,{children:e(Z,{columns:z,dataSource:p,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,t)=>`${t[0]}-${t[1]} of ${a} users`}})}),e(w,{title:"Create New User",open:F,onCancel:()=>f(!1),footer:null,width:600,children:e(N,{initialValues:{name:"",email:"",role:"",instituteCode:"INST001"},validationSchema:T,onSubmit:O,children:({values:a,errors:t,touched:i,handleChange:l,handleSubmit:U})=>s(n,{layout:"vertical",onFinish:U,children:[e(n.Item,{label:"Full Name",validateStatus:t.name&&i.name?"error":"",help:t.name&&i.name?t.name:"",children:e(m,{name:"name",value:a.name,onChange:l,placeholder:"Enter full name"})}),e(n.Item,{label:"Email",validateStatus:t.email&&i.email?"error":"",help:t.email&&i.email?t.email:"",children:e(m,{name:"email",value:a.email,onChange:l,placeholder:"Enter email address"})}),e(n.Item,{label:"Role",validateStatus:t.role&&i.role?"error":"",help:t.role&&i.role?t.role:"",children:s(b,{value:a.role,onChange:u=>l({target:{name:"role",value:u}}),placeholder:"Select role",children:[e(o,{value:"student",children:"Student"}),e(o,{value:"instructor",children:"Instructor"}),e(o,{value:"admin",children:"Administrator"})]})}),e(n.Item,{label:"Institute Code",validateStatus:t.instituteCode&&i.instituteCode?"error":"",help:t.instituteCode&&i.instituteCode?t.instituteCode:"",children:e(m,{name:"instituteCode",value:a.instituteCode,onChange:l,placeholder:"Enter institute code"})}),e(n.Item,{className:"mb-0 text-right",children:s(A,{children:[e(d,{onClick:()=>f(!1),children:"Cancel"}),e(d,{type:"primary",htmlType:"submit",loading:I,children:"Create User"})]})})]})})}),e(w,{title:"Edit User",open:q,onCancel:()=>{C(!1),x(null)},footer:null,width:600,children:r&&e(N,{initialValues:{name:r.name,email:r.email,role:r.role,instituteCode:r.instituteCode,isActive:r.isActive},validationSchema:T,onSubmit:$,children:({values:a,errors:t,touched:i,handleChange:l,handleSubmit:U})=>s(n,{layout:"vertical",onFinish:U,children:[e(n.Item,{label:"Full Name",validateStatus:t.name&&i.name?"error":"",help:t.name&&i.name?t.name:"",children:e(m,{name:"name",value:a.name,onChange:l,placeholder:"Enter full name"})}),e(n.Item,{label:"Email",validateStatus:t.email&&i.email?"error":"",help:t.email&&i.email?t.email:"",children:e(m,{name:"email",value:a.email,onChange:l,placeholder:"Enter email address"})}),e(n.Item,{label:"Role",validateStatus:t.role&&i.role?"error":"",help:t.role&&i.role?t.role:"",children:s(b,{value:a.role,onChange:u=>l({target:{name:"role",value:u}}),placeholder:"Select role",children:[e(o,{value:"student",children:"Student"}),e(o,{value:"instructor",children:"Instructor"}),e(o,{value:"admin",children:"Administrator"})]})}),e(n.Item,{label:"Institute Code",validateStatus:t.instituteCode&&i.instituteCode?"error":"",help:t.instituteCode&&i.instituteCode?t.instituteCode:"",children:e(m,{name:"instituteCode",value:a.instituteCode,onChange:l,placeholder:"Enter institute code"})}),e(n.Item,{label:"Status",children:s(b,{value:a.isActive,onChange:u=>l({target:{name:"isActive",value:u}}),children:[e(o,{value:!0,children:"Active"}),e(o,{value:!1,children:"Suspended"})]})}),e(n.Item,{className:"mb-0 text-right",children:s(A,{children:[e(d,{onClick:()=>{C(!1),x(null)},children:"Cancel"}),e(d,{type:"primary",htmlType:"submit",loading:I,children:"Update User"})]})})]})})})]})};export{fe as default};
