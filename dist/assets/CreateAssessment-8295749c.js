import{aa as j,ab as o,ah as y,ai as f,aj as U,u as Z,Z as J,f as Q,a as s,j as e,af as K,C as v,I as N,q as p,s as d,ak as O,a0 as D,a8 as W,$ as P}from"./index-7e43eeaa.js";import{d as X}from"./assessments-75df469f.js";import{F as Y}from"./index-8494a245.js";import{I as w}from"./index-5e1b8229.js";import{D as T}from"./DeleteOutlined-133431b9.js";import{M as I}from"./index-3d906005.js";import{D as V}from"./index-5a52cdcf.js";import{S as ee}from"./SaveOutlined-c79f92fe.js";import"./useForm-872d7ca5.js";import"./row-43cc7f0c.js";import"./index-d2f8d546.js";import"./fade-e1fcf046.js";import"./useClosable-f6b9b093.js";import"./extendsObject-bdadc4da.js";const{Option:u}=p,{TextArea:_}=N,ie=j().shape({title:o().required("Title is required"),description:o().required("Description is required"),subject:o().required("Subject is required"),type:o().required("Type is required"),duration:y().min(1,"Duration must be at least 1 minute").required("Duration is required"),passingScore:y().min(0).max(100).required("Passing score is required"),difficulty:o().required("Difficulty is required"),questions:f().of(j().shape({question:o().required("Question text is required"),type:o().required("Question type is required"),points:y().min(1).required("Points are required"),options:f().when("type",{is:b=>b==="mcq"||b==="multiple_choice",then:f().min(2,"At least 2 options required").required("Options are required")}),correctAnswer:U().when("type",{is:"mcq",then:o().required("Correct answer is required")}),correctAnswers:f().when("type",{is:"multiple_choice",then:f().min(1,"At least one correct answer required").required("Correct answers are required")})})).min(1,"At least one question is required")}),fe=()=>{var A,S;const{user:b}=Z(),q=J(),[$,g]=Q.useState(!1),[E,x]=Q.useState(!1),C=[{value:"mcq",label:"Multiple Choice (Single Answer)"},{value:"multiple_choice",label:"Multiple Choice (Multiple Answers)"},{value:"short_answer",label:"Short Answer"},{value:"long_answer",label:"Long Answer"}],z=["Computer Science","Mathematics","Physics","Chemistry","Biology","English","History","Geography"],M=["beginner","intermediate","advanced"],F=async i=>{x(!0);try{await new Promise(r=>setTimeout(r,2e3));const n={...i,instructorId:b.id,instructorName:b.name,status:"draft",enrolledStudents:[],questions:i.questions.map((r,l)=>({id:Date.now()+l,...r}))};X(n),P.success("Assessment created successfully!"),q("/manage-assessments")}catch{P.error("Failed to create assessment")}finally{x(!1)}},B=(i,n)=>{const r={question:"",type:"mcq",points:5,options:["",""],correctAnswer:"",correctAnswers:[]};n({...i,questions:[...i.questions,r]})},G=(i,n,r)=>{const l=n.questions.filter((t,c)=>c!==i);r({...n,questions:l})},H=(i,n,r)=>{const l=[...n.questions];l[i].options.push(""),r({...n,questions:l})},L=(i,n,r,l)=>{const t=[...r.questions];t[i].options=t[i].options.filter((c,a)=>a!==n),l({...r,questions:t})},h=(i,n,r,l,t)=>{const c=[...l.questions];c[i][n]=r,t({...l,questions:c})};return s("div",{className:"p-6 max-w-4xl mx-auto",children:[s("div",{className:"mb-6",children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Create New Assessment"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Build your assessment with multiple question types"})]}),e(K,{initialValues:{title:"",description:"",subject:"",type:"quiz",duration:60,passingScore:70,difficulty:"intermediate",questions:[{question:"",type:"mcq",points:5,options:["",""],correctAnswer:"",correctAnswers:[]}]},validationSchema:ie,onSubmit:F,children:({values:i,errors:n,touched:r,setValues:l})=>s(Y,{layout:"vertical",className:"space-y-6",children:[s(v,{title:"Assessment Details",children:[s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e(N,{value:i.title,onChange:t=>l({...i,title:t.target.value}),placeholder:"Enter assessment title",status:n.title&&r.title?"error":""}),n.title&&r.title&&e("div",{className:"text-red-500 text-sm mt-1",children:n.title})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e(p,{value:i.subject,onChange:t=>l({...i,subject:t}),className:"w-full",placeholder:"Select subject",status:n.subject&&r.subject?"error":"",children:z.map(t=>e(u,{value:t,children:t},t))}),n.subject&&r.subject&&e("div",{className:"text-red-500 text-sm mt-1",children:n.subject})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Type *"}),s(p,{value:i.type,onChange:t=>l({...i,type:t}),className:"w-full",status:n.type&&r.type?"error":"",children:[e(u,{value:"quiz",children:"Quiz"}),e(u,{value:"exam",children:"Exam"}),e(u,{value:"assignment",children:"Assignment"})]})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Difficulty *"}),e(p,{value:i.difficulty,onChange:t=>l({...i,difficulty:t}),className:"w-full",status:n.difficulty&&r.difficulty?"error":"",children:M.map(t=>e(u,{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Duration (minutes) *"}),e(w,{value:i.duration,onChange:t=>l({...i,duration:t}),min:1,className:"w-full",status:n.duration&&r.duration?"error":""})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Passing Score (%) *"}),e(w,{value:i.passingScore,onChange:t=>l({...i,passingScore:t}),min:0,max:100,className:"w-full",status:n.passingScore&&r.passingScore?"error":""})]})]}),s("div",{className:"mt-4",children:[e("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),e(_,{value:i.description,onChange:t=>l({...i,description:t.target.value}),rows:3,placeholder:"Enter assessment description",status:n.description&&r.description?"error":""}),n.description&&r.description&&e("div",{className:"text-red-500 text-sm mt-1",children:n.description})]})]}),s(v,{title:"Questions",children:[i.questions.map((t,c)=>s("div",{className:"mb-6 p-4 border rounded-lg",children:[s("div",{className:"flex justify-between items-center mb-4",children:[s("h3",{className:"text-lg font-medium",children:["Question ",c+1]}),e(d,{danger:!0,icon:e(T,{}),onClick:()=>G(c,i,l),disabled:i.questions.length===1,children:"Remove"})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Type *"}),e(p,{value:t.type,onChange:a=>h(c,"type",a,i,l),className:"w-full",children:C.map(a=>e(u,{value:a.value,children:a.label},a.value))})]}),s("div",{children:[e("label",{className:"block text-sm font-medium mb-2",children:"Points *"}),e(w,{value:t.points,onChange:a=>h(c,"points",a,i,l),min:1,className:"w-full"})]})]}),s("div",{className:"mb-4",children:[e("label",{className:"block text-sm font-medium mb-2",children:"Question *"}),e(_,{value:t.question,onChange:a=>h(c,"question",a.target.value,i,l),rows:2,placeholder:"Enter your question"})]}),(t.type==="mcq"||t.type==="multiple_choice")&&s("div",{className:"mb-4",children:[s("div",{className:"flex justify-between items-center mb-2",children:[e("label",{className:"block text-sm font-medium",children:"Options *"}),e(d,{type:"dashed",icon:e(O,{}),onClick:()=>H(c,i,l),size:"small",children:"Add Option"})]}),t.options.map((a,m)=>s("div",{className:"flex items-center space-x-2 mb-2",children:[e(N,{value:a,onChange:R=>{const k=[...t.options];k[m]=R.target.value,h(c,"options",k,i,l)},placeholder:`Option ${m+1}`,className:"flex-1"}),e(d,{danger:!0,icon:e(T,{}),onClick:()=>L(c,m,i,l),disabled:t.options.length===2,size:"small"})]},m)),s("div",{className:"mt-4",children:[s("label",{className:"block text-sm font-medium mb-2",children:["Correct Answer",t.type==="multiple_choice"?"s":""," *"]}),t.type==="mcq"?e(p,{value:t.correctAnswer,onChange:a=>h(c,"correctAnswer",a,i,l),className:"w-full",placeholder:"Select correct answer",children:t.options.map((a,m)=>e(u,{value:a,disabled:!a.trim(),children:a||`Option ${m+1}`},m))}):e(p,{mode:"multiple",value:t.correctAnswers,onChange:a=>h(c,"correctAnswers",a,a,l),className:"w-full",placeholder:"Select correct answers",children:t.options.map((a,m)=>e(u,{value:a,disabled:!a.trim(),children:a||`Option ${m+1}`},m))})]})]})]},c)),e(d,{type:"dashed",icon:e(O,{}),onClick:()=>B(i,l),className:"w-full",children:"Add Question"}),n.questions&&typeof n.questions=="string"&&e("div",{className:"text-red-500 text-sm mt-2",children:n.questions})]}),s("div",{className:"flex justify-between",children:[e(D,{children:e(d,{icon:e(W,{}),onClick:()=>g(!0),children:"Preview"})}),s(D,{children:[e(d,{onClick:()=>q("/manage-assessments"),children:"Cancel"}),e(d,{type:"primary",htmlType:"submit",icon:e(ee,{}),loading:E,children:"Create Assessment"})]})]})]})}),e(I,{title:"Assessment Preview",open:$,onCancel:()=>g(!1),width:800,footer:[e(d,{onClick:()=>g(!1),children:"Close"},"close")],children:s("div",{className:"space-y-4",children:[s("div",{children:[e("h2",{className:"text-xl font-bold",children:values==null?void 0:values.title}),e("p",{className:"text-gray-600",children:values==null?void 0:values.description})]}),s("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s("div",{children:["Subject: ",values==null?void 0:values.subject]}),s("div",{children:["Type: ",values==null?void 0:values.type]}),s("div",{children:["Duration: ",values==null?void 0:values.duration," minutes"]}),s("div",{children:["Passing Score: ",values==null?void 0:values.passingScore,"%"]})]}),e(V,{}),s("div",{children:[s("h3",{className:"font-bold mb-4",children:["Questions (",(A=values==null?void 0:values.questions)==null?void 0:A.length,")"]}),(S=values==null?void 0:values.questions)==null?void 0:S.map((i,n)=>{var r;return s(v,{size:"small",className:"mb-3",children:[s("div",{className:"font-medium mb-2",children:[n+1,". ",i.question," (",i.points," points)"]}),s("div",{className:"text-sm text-gray-600",children:["Type: ",(r=C.find(l=>l.value===i.type))==null?void 0:r.label]}),(i.type==="mcq"||i.type==="multiple_choice")&&s("div",{className:"mt-2",children:[e("div",{className:"text-sm font-medium",children:"Options:"}),e("ul",{className:"text-sm ml-4",children:i.options.map((l,t)=>e("li",{className:i.type==="mcq"&&l===i.correctAnswer||i.type==="multiple_choice"&&i.correctAnswers.includes(l)?"text-green-600 font-medium":"",children:l||`Option ${t+1}`},t))})]})]},n)})]})]})})]})};export{fe as default};
