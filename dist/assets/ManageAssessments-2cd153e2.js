import{u as T,f as p,a as r,j as e,L as D,s as i,ak as E,C as w,I as c,q as x,$ as u,ag as F,a0 as P,a8 as N,X as q}from"./index-7e43eeaa.js";import{c as M,u as O,e as $}from"./assessments-75df469f.js";import{F as a}from"./index-8494a245.js";import{T as j}from"./Table-8d2bfa3e.js";import{M as z}from"./index-3d906005.js";import{T as g}from"./index-cdc86ff5.js";import{P as Q}from"./index-292e3508.js";import{D as V}from"./DeleteOutlined-133431b9.js";import"./useForm-872d7ca5.js";import"./row-43cc7f0c.js";import"./index-d2f8d546.js";import"./index-6887f962.js";import"./index-b2b0373a.js";import"./extendsObject-bdadc4da.js";import"./fade-e1fcf046.js";import"./useClosable-f6b9b093.js";const{Option:h}=x,ae=()=>{const{user:A}=T(),[k,y]=p.useState(M(A.id)),[b,l]=p.useState(!1),[f,d]=p.useState(null),[n]=a.useForm(),S=t=>{switch(t){case"active":return"green";case"draft":return"orange";case"archived":return"gray";default:return"default"}},v=t=>{d(t),n.setFieldsValue({title:t.title,description:t.description,status:t.status,duration:t.duration,passingScore:t.passingScore}),l(!0)},C=async t=>{try{const s=O(f.id,t);s&&(y(m=>m.map(o=>o.id===f.id?s:o)),l(!1),d(null),n.resetFields(),u.success("Assessment updated successfully!"))}catch{u.error("Failed to update assessment")}},I=async t=>{try{$(t)&&(y(m=>m.filter(o=>o.id!==t)),u.success("Assessment deleted successfully!"))}catch{u.error("Failed to delete assessment")}};return r("div",{className:"p-6",children:[r("div",{className:"flex justify-between items-center mb-6",children:[r("div",{children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Manage Assessments"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Create, edit, and manage your assessments"})]}),e(D,{to:"/create-assessment",children:e(i,{type:"primary",icon:e(E,{}),children:"Create Assessment"})})]}),e(w,{children:e(j,{columns:[{title:"Title",dataIndex:"title",key:"title",render:(t,s)=>r("div",{children:[e("div",{className:"font-medium",children:t}),e("div",{className:"text-sm text-gray-600",children:s.subject})]})},{title:"Type",dataIndex:"type",key:"type",render:t=>e(g,{color:"blue",children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Status",dataIndex:"status",key:"status",render:t=>e(g,{color:S(t),children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Students",dataIndex:"enrolledStudents",key:"students",render:t=>r("div",{className:"flex items-center space-x-1",children:[e(F,{}),e("span",{children:t.length})]})},{title:"Questions",dataIndex:"totalQuestions",key:"questions",render:t=>`${t} questions`},{title:"Duration",dataIndex:"duration",key:"duration",render:t=>`${t} min`},{title:"Deadline",dataIndex:"deadline",key:"deadline",render:t=>t?new Date(t).toLocaleDateString():"No deadline"},{title:"Actions",key:"actions",render:(t,s)=>r(P,{children:[e(i,{type:"link",icon:e(N,{}),size:"small",children:"View"}),e(i,{type:"link",icon:e(q,{}),size:"small",onClick:()=>v(s),children:"Edit"}),e(Q,{title:"Delete Assessment",description:"Are you sure you want to delete this assessment? This action cannot be undone.",onConfirm:()=>I(s.id),okText:"Delete",cancelText:"Cancel",okButtonProps:{danger:!0},children:e(i,{type:"link",danger:!0,icon:e(V,{}),size:"small",children:"Delete"})})]})}],dataSource:k,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} assessments`},locale:{emptyText:"No assessments created yet"}})}),e(z,{title:"Edit Assessment",open:b,onCancel:()=>{l(!1),d(null),n.resetFields()},footer:[e(i,{onClick:()=>{l(!1),d(null),n.resetFields()},children:"Cancel"},"cancel"),e(i,{type:"primary",onClick:()=>n.submit(),children:"Update"},"submit")],children:r(a,{form:n,layout:"vertical",onFinish:C,children:[e(a.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Please enter assessment title"}],children:e(c,{placeholder:"Enter assessment title"})}),e(a.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please enter assessment description"}],children:e(c.TextArea,{rows:3,placeholder:"Enter assessment description"})}),e(a.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:r(x,{placeholder:"Select status",children:[e(h,{value:"draft",children:"Draft"}),e(h,{value:"active",children:"Active"}),e(h,{value:"archived",children:"Archived"})]})}),e(a.Item,{name:"duration",label:"Duration (minutes)",rules:[{required:!0,message:"Please enter duration"}],children:e(c,{type:"number",min:1,placeholder:"Enter duration in minutes"})}),e(a.Item,{name:"passingScore",label:"Passing Score (%)",rules:[{required:!0,message:"Please enter passing score"}],children:e(c,{type:"number",min:0,max:100,placeholder:"Enter passing score"})})]})})]})};export{ae as default};
