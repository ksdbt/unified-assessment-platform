import{u as L,f,aY as P,a as r,j as e,C as n,ag as $,I as z,S as M,q as p,A as D,U as R}from"./index-7e43eeaa.js";import{c as j}from"./assessments-75df469f.js";import{c as B}from"./submissions-daaf532e.js";import{R as E,C as c}from"./row-43cc7f0c.js";import{S as d}from"./index-3a5ddc68.js";import{T as F}from"./Table-8d2bfa3e.js";import{P as U}from"./progress-213077d5.js";import{T as _}from"./index-cdc86ff5.js";import{T as q}from"./TrophyOutlined-3606b085.js";import"./index-d2f8d546.js";import"./index-6887f962.js";import"./useForm-872d7ca5.js";import"./index-b2b0373a.js";import"./extendsObject-bdadc4da.js";import"./useClosable-f6b9b093.js";const{Option:G}=p,ne=()=>{const{user:S}=L(),[m,x]=f.useState(""),[y,b]=f.useState(""),g=j(S.id),N=P("student"),u=g.flatMap(t=>B(t.id)),i=N.map(t=>{const s=u.filter(o=>o.studentId===t.id),a=s.filter(o=>o.status==="evaluated"),l=s.length,h=a.length,I=a.length>0?Math.round(a.reduce((o,O)=>o+O.percentage,0)/a.length):0;return{...t,totalAssessments:l,completedAssessments:h,averageScore:I,submissions:s}}).filter(t=>t.totalAssessments>0),w=i.filter(t=>t.name.toLowerCase().includes(m.toLowerCase())||t.email.toLowerCase().includes(m.toLowerCase())),A=i.length,C=i.length>0?Math.round(i.reduce((t,s)=>t+s.averageScore,0)/i.length):0,v=u.length,T=u.filter(t=>t.status==="evaluated").length,k=[{title:"Student",dataIndex:"name",key:"student",render:(t,s)=>r("div",{className:"flex items-center space-x-3",children:[e(D,{src:s.avatar,icon:e(R,{})}),r("div",{children:[e("div",{className:"font-medium",children:t}),e("div",{className:"text-sm text-gray-600",children:s.email})]})]})},{title:"Assessments",dataIndex:"totalAssessments",key:"assessments",render:(t,s)=>r("div",{className:"text-center",children:[r("div",{className:"font-medium",children:[s.completedAssessments,"/",t]}),e(U,{percent:t>0?Math.round(s.completedAssessments/t*100):0,size:"small",showInfo:!1})]})},{title:"Average Score",dataIndex:"averageScore",key:"averageScore",render:t=>e("div",{className:"text-center",children:r("div",{className:`text-lg font-bold ${t>=80?"text-green-600":t>=60?"text-orange-600":"text-red-600"}`,children:[t,"%"]})})},{title:"Performance",key:"performance",render:(t,s)=>{let a="Poor",l="red";return s.averageScore>=90?(a="Excellent",l="green"):s.averageScore>=80?(a="Good",l="blue"):s.averageScore>=70&&(a="Average",l="orange"),e(_,{color:l,children:a})}},{title:"Recent Activity",key:"activity",render:(t,s)=>{const a=s.submissions.sort((l,h)=>new Date(h.submittedAt)-new Date(l.submittedAt))[0];return a?r("div",{className:"text-sm",children:[e("div",{children:new Date(a.submittedAt).toLocaleDateString()}),e("div",{className:"text-gray-600",children:a.status==="evaluated"?`${a.percentage}%`:"Pending"})]}):e("span",{className:"text-gray-500",children:"No activity"})}}];return r("div",{className:"p-6",children:[r("div",{className:"mb-6",children:[e("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Student Overview"}),e("p",{className:"text-gray-600 dark:text-gray-400",children:"Monitor student performance and progress"})]}),r(E,{gutter:[16,16],className:"mb-6",children:[e(c,{xs:24,sm:12,lg:6,children:e(n,{children:e(d,{title:"Total Students",value:A,prefix:e($,{}),valueStyle:{color:"#1890ff"}})})}),e(c,{xs:24,sm:12,lg:6,children:e(n,{children:e(d,{title:"Class Average",value:C,suffix:"%",prefix:e(q,{}),valueStyle:{color:"#52c41a"}})})}),e(c,{xs:24,sm:12,lg:6,children:e(n,{children:e(d,{title:"Total Submissions",value:v,valueStyle:{color:"#722ed1"}})})}),e(c,{xs:24,sm:12,lg:6,children:e(n,{children:e(d,{title:"Evaluated",value:T,suffix:`/ ${v}`,valueStyle:{color:"#faad14"}})})})]}),e(n,{className:"mb-6",children:r("div",{className:"flex flex-col sm:flex-row gap-4",children:[e("div",{className:"flex-1",children:e(z,{placeholder:"Search students by name or email...",prefix:e(M,{}),value:m,onChange:t=>x(t.target.value),size:"large"})}),e("div",{className:"w-full sm:w-64",children:e(p,{placeholder:"Filter by assessment",value:y,onChange:b,className:"w-full",size:"large",allowClear:!0,children:g.map(t=>e(G,{value:t.id,children:t.title},t.id))})})]})}),e(n,{children:e(F,{columns:k,dataSource:w,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(t,s)=>`${s[0]}-${s[1]} of ${t} students`},locale:{emptyText:"No students found"}})})]})};export{ne as default};
